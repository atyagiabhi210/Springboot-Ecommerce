{"ast":null,"code":"var _jsxFileName = \"/Users/abhishektyagi/Developer/nonu/frontend/src/context/CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { toast } from 'react-toastify';\nimport * as cartService from '../services/cartService';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const useCart = () => {\n  _s();\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n_s(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  const [cart, setCart] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const {\n    user,\n    isAuthenticated\n  } = useAuth();\n  const fetchCart = async () => {\n    if (!isAuthenticated) {\n      setCart(null);\n      return;\n    }\n    try {\n      setLoading(true);\n      const response = await cartService.getCart();\n      setCart(response.data);\n    } catch (error) {\n      console.error('Error fetching cart:', error);\n      setCart(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchCart();\n  }, [isAuthenticated]);\n  const addToCart = async (productId, quantity = 1) => {\n    if (!isAuthenticated) {\n      toast.error('Please login to add items to cart');\n      return;\n    }\n    try {\n      setLoading(true);\n      const response = await cartService.addToCart(productId, quantity);\n      setCart(response.data);\n      toast.success('Item added to cart!');\n      return {\n        success: true\n      };\n    } catch (error) {\n      var _error$response, _error$response$data;\n      const message = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Failed to add item to cart';\n      toast.error(message);\n      return {\n        success: false,\n        error: message\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n  const updateQuantity = async (productId, quantity) => {\n    try {\n      setLoading(true);\n      const response = await cartService.updateQuantity(productId, quantity);\n      setCart(response.data);\n      toast.success('Cart updated!');\n    } catch (error) {\n      toast.error('Failed to update cart');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const removeFromCart = async productId => {\n    try {\n      setLoading(true);\n      const response = await cartService.removeFromCart(productId);\n      setCart(response.data);\n      toast.success('Item removed from cart');\n    } catch (error) {\n      toast.error('Failed to remove item from cart');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const clearCart = async () => {\n    try {\n      setLoading(true);\n      await cartService.clearCart();\n      setCart(null);\n      toast.success('Cart cleared');\n    } catch (error) {\n      toast.error('Failed to clear cart');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getCartTotal = () => {\n    if (!cart || !cart.items) return 0;\n    return cart.items.reduce((total, item) => {\n      return total + item.product.price * item.quantity;\n    }, 0);\n  };\n  const getCartItemCount = () => {\n    if (!cart || !cart.items) return 0;\n    return cart.items.reduce((count, item) => count + item.quantity, 0);\n  };\n  const value = {\n    cart,\n    loading,\n    addToCart,\n    updateQuantity,\n    removeFromCart,\n    clearCart,\n    fetchCart,\n    getCartTotal,\n    getCartItemCount\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n};\n_s2(CartProvider, \"OBzgYGMoj+RLvKjE0qRRGT9uaug=\", false, function () {\n  return [useAuth];\n});\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","toast","cartService","useAuth","jsxDEV","_jsxDEV","CartContext","useCart","_s","context","Error","CartProvider","children","_s2","cart","setCart","loading","setLoading","user","isAuthenticated","fetchCart","response","getCart","data","error","console","addToCart","productId","quantity","success","_error$response","_error$response$data","message","updateQuantity","removeFromCart","clearCart","getCartTotal","items","reduce","total","item","product","price","getCartItemCount","count","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/abhishektyagi/Developer/nonu/frontend/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { toast } from 'react-toastify';\nimport * as cartService from '../services/cartService';\nimport { useAuth } from './AuthContext';\n\nconst CartContext = createContext();\n\nexport const useCart = () => {\n    const context = useContext(CartContext);\n    if (!context) {\n        throw new Error('useCart must be used within a CartProvider');\n    }\n    return context;\n};\n\nexport const CartProvider = ({ children }) => {\n    const [cart, setCart] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const { user, isAuthenticated } = useAuth();\n\n    const fetchCart = async () => {\n        if (!isAuthenticated) {\n            setCart(null);\n            return;\n        }\n\n        try {\n            setLoading(true);\n            const response = await cartService.getCart();\n            setCart(response.data);\n        } catch (error) {\n            console.error('Error fetching cart:', error);\n            setCart(null);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchCart();\n    }, [isAuthenticated]);\n\n    const addToCart = async (productId, quantity = 1) => {\n        if (!isAuthenticated) {\n            toast.error('Please login to add items to cart');\n            return;\n        }\n\n        try {\n            setLoading(true);\n            const response = await cartService.addToCart(productId, quantity);\n            setCart(response.data);\n            toast.success('Item added to cart!');\n            return { success: true };\n        } catch (error) {\n            const message = error.response?.data?.message || 'Failed to add item to cart';\n            toast.error(message);\n            return { success: false, error: message };\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const updateQuantity = async (productId, quantity) => {\n        try {\n            setLoading(true);\n            const response = await cartService.updateQuantity(productId, quantity);\n            setCart(response.data);\n            toast.success('Cart updated!');\n        } catch (error) {\n            toast.error('Failed to update cart');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const removeFromCart = async (productId) => {\n        try {\n            setLoading(true);\n            const response = await cartService.removeFromCart(productId);\n            setCart(response.data);\n            toast.success('Item removed from cart');\n        } catch (error) {\n            toast.error('Failed to remove item from cart');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const clearCart = async () => {\n        try {\n            setLoading(true);\n            await cartService.clearCart();\n            setCart(null);\n            toast.success('Cart cleared');\n        } catch (error) {\n            toast.error('Failed to clear cart');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const getCartTotal = () => {\n        if (!cart || !cart.items) return 0;\n        return cart.items.reduce((total, item) => {\n            return total + (item.product.price * item.quantity);\n        }, 0);\n    };\n\n    const getCartItemCount = () => {\n        if (!cart || !cart.items) return 0;\n        return cart.items.reduce((count, item) => count + item.quantity, 0);\n    };\n\n    const value = {\n        cart,\n        loading,\n        addToCart,\n        updateQuantity,\n        removeFromCart,\n        clearCart,\n        fetchCart,\n        getCartTotal,\n        getCartItemCount\n    };\n\n    return (\n        <CartContext.Provider value={value}>\n            {children}\n        </CartContext.Provider>\n    );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}